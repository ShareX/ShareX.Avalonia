<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ShareX.Avalonia.UI.ViewModels"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        mc:Ignorable="d" d:DesignWidth="700" d:DesignHeight="500"
        x:Class="ShareX.Avalonia.UI.Views.SettingsWindow"
        x:DataType="vm:SettingsViewModel"
        Title="Settings"
        Width="700" Height="500"
        WindowStartupLocation="CenterOwner">

    <Design.DataContext>
        <vm:SettingsViewModel/>
    </Design.DataContext>

    <Grid RowDefinitions="*,Auto">
        <!-- Settings Content -->
        <TabControl Grid.Row="0">
            <!-- General Tab -->
            <TabItem Header="General">
                <ScrollViewer>
                    <StackPanel Margin="20" Spacing="15">
                        <TextBlock Text="General Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                        
                        <!-- Screenshots Folder -->
                        <StackPanel Spacing="5">
                            <TextBlock Text="Screenshots Folder:" FontWeight="SemiBold"/>
                            <Grid ColumnDefinitions="*,Auto">
                                <TextBox Grid.Column="0" 
                                         Text="{Binding ScreenshotsFolder}" 
                                         Watermark="Path to screenshots folder"/>
                                <Button Grid.Column="1" 
                                        Content="Browse..." 
                                        Command="{Binding BrowseFolderCommand}"
                                        Margin="5,0,0,0"
                                        Width="80"/>
                            </Grid>
                        </StackPanel>

                        <!-- Name Format Pattern -->
                        <StackPanel Spacing="5">
                            <TextBlock Text="Subfolder Pattern:" FontWeight="SemiBold"/>
                            <TextBox Text="{Binding SaveImageSubFolderPattern}" 
                                     Watermark="%y-%mo"/>
                            <TextBlock Text="Example: 2025-01" 
                                       FontSize="11" 
                                       Foreground="Gray"/>
                        </StackPanel>

                        <!-- Theme -->
                        <StackPanel Spacing="5">
                            <TextBlock Text="Theme:" FontWeight="SemiBold"/>
                            <ComboBox SelectedIndex="{Binding SelectedTheme}" Width="200" HorizontalAlignment="Left">
                                <ComboBoxItem Content="Default"/>
                                <ComboBoxItem Content="Dark"/>
                            </ComboBox>
                        </StackPanel>

                        <!-- Checkboxes -->
                        <CheckBox IsChecked="{Binding UseCustomScreenshotsPath}" 
                                  Content="Use custom screenshots path"/>
                        <CheckBox IsChecked="{Binding ShowTray}" 
                                  Content="Show tray icon"/>
                        <CheckBox IsChecked="{Binding SilentRun}" 
                                  Content="Start minimized to tray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Capture Tab -->
            <TabItem Header="Capture">
                <ScrollViewer>
                    <StackPanel Margin="20" Spacing="15">
                        <TextBlock Text="Capture Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock Text="Capture settings will be added here..." Foreground="Gray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>

            <!-- Upload Tab -->
            <TabItem Header="Upload">
                <ScrollViewer>
                    <StackPanel Margin="20" Spacing="15">
                        <TextBlock Text="Upload Settings" FontSize="18" FontWeight="Bold" Margin="0,0,0,10"/>
                        <TextBlock Text="Upload destination settings will be added here..." Foreground="Gray"/>
                    </StackPanel>
                </ScrollViewer>
            </TabItem>
        </TabControl>

        <!-- Bottom Buttons -->
        <Border Grid.Row="1" 
                BorderBrush="Gray" 
                BorderThickness="0,1,0,0" 
                Background="#10FFFFFF"
                Padding="20,10">
            <StackPanel Orientation="Horizontal" 
                        HorizontalAlignment="Right" 
                        Spacing="10">
                <Button Content="Reset to Defaults" 
                        Command="{Binding ResetToDefaultsCommand}"
                        Width="130"/>
                <Button Content="Save" 
                        Command="{Binding SaveSettingsCommand}"
                        Width="80"/>
                <Button Content="Cancel" 
                        Click="OnCancelClick"
                        Width="80"/>
            </StackPanel>
        </Border>
    </Grid>
</Window>
